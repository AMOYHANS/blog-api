import{d as x,u as y,r as u,w as C,a as d,c as p,f as e,t as I,s as v,v as _,i as L,e as g,n as S,k as U,m as V,p as B,q as D,_ as N}from"./index-DusIQIs_.js";import{l as R,r as $}from"./index-DbGqQ7II.js";import"./request-Lpnrrob0.js";const f=a=>(B("data-v-96928935"),a=a(),D(),a),q={class:"inputForm"},z={class:"title"},E={class:"formItems"},F={class:"formItem"},M={class:"formLabel"},T=f(()=>e("span",null,"邮箱:",-1)),j={key:0,class:"formItem"},A={class:"formLabel"},G=f(()=>e("span",null,"用户名:",-1)),H={class:"formItem"},J={class:"formLabel"},K=f(()=>e("span",null,"密码:",-1)),O={class:"formItem"},P=x({__name:"index",setup(a){const{setUserInfo:k,setIsLogin:b}=y(),h=U(),l=V(),o=u(h.meta.isLogin);C(()=>h.path,r=>{o.value=r==="/login"});const n=u(""),i=u(""),c=u(""),w=r=>{if(r.preventDefault(),o.value){const s={email:n.value,password:i.value};R(s).then(({data:t,status:m})=>{m===201&&t&&(k(t),b(!0),l.push("/home"))})}else{const s={email:n.value,password:i.value,name:c.value};$(s).then(({data:t,status:m})=>{m===201&&t?l.push("/login"):alert("注册失败")})}};return(r,s)=>(d(),p("div",{class:S(["container",o.value?"":"container2"])},[e("div",q,[e("div",z,I(o.value?"登录":"注册"),1),e("div",E,[e("div",F,[e("label",M,[T,v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),type:"email",placeholder:"请输入电子邮箱"},null,512),[[_,n.value]])])]),o.value?L("",!0):(d(),p("div",j,[e("label",A,[G,v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),type:"text",placeholder:"请输入用户名"},null,512),[[_,c.value]])])])),e("div",H,[e("label",J,[K,v(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>i.value=t),type:"password",placeholder:"请输入密码"},null,512),[[_,i.value]])])]),e("div",O,[e("button",{onClick:w},I(o.value?"确认登录":"立即注册"),1)]),o.value?(d(),p("span",{key:1,class:"moreInfo",onClick:s[3]||(s[3]=t=>g(l).push("/register"))},"没有账号?点我去注册")):(d(),p("span",{key:2,class:"moreInfo",onClick:s[4]||(s[4]=t=>g(l).push("/login"))},"已有账号？点我去登录"))])])],2))}}),Y=N(P,[["__scopeId","data-v-96928935"]]);export{Y as default};
